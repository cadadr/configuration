#!/bin/sh
# X session initialisation file.

set -e

. $MYLIB/fns.sh

logx Set up environment...
# If shell settings are not loaded yet, load them.
if [ "x$SHRC_VERSION" = "x" ]; then
	logx Source user profile...
	. $HOME/.profile
fi

systemctl --user import-environment DISPLAY

logx Merge X resources...
xrdb -merge $MEINE/Xdefaults

logx Keyboard settings...
setxkbmap gb basic ctrl:nocaps

logx Set the background.
xsetroot -gray

logx xinput settings
xinput --set-prop 'ETPS/2 Elantech Touchpad' 283 1	# natural scrolling
xinput --set-prop 'ETPS/2 Elantech Touchpad' 291 0 1	# multitouch clicks

logx Start status bar script
dwm-status.sh &

logx Start background programs
dunst &
pasystray &

logx 'Start the desktop session...'
exec dbus-launch --exit-with-session sh $MEINE/x.sh
